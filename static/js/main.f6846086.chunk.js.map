{"version":3,"sources":["utils/axios.js","pages/HomePage/useFetchDataHook.js","pages/HomePage/index.js","pages/DetailPage/index.js","App.js","index.js"],"names":["instance","axios","create","baseURL","CancelToken","isCancel","STATUS","TYPE","reducer","state","action","type","status","data","payload","total","useFetchDataHook","keyword","useReducer","dispatch","useState","sourceToken","setSourceToken","value","a","trim","message","warning","cancel","source","get","cancelToken","token","items","total_count","console","log","nextPage","Math","floor","length","HomePage","setKeyword","getData","getTotal","isLoading","isLoadSuccess","isLoadError","clearSearch","handleSearch","handleLoadMore","className","style","backgroundColor","width","Search","placeholder","enterButton","onSearch","onChange","e","target","icon","ClearOutlined","onClick","size","tip","spinning","delay","height","title","subTitle","map","user","index","key","id","borderBottom","src","avatar_url","login","href","html_url","to","DetailPage","App","GithubOutlined","fontSize","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f6846086.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n    baseURL: 'https://api.github.com'\n});\ninstance.CancelToken = axios.CancelToken;\ninstance.isCancel = axios.isCancel\n\nexport default instance;\n","import { useState, useReducer } from 'react';\nimport { message } from 'antd';\n\nimport axios from 'utils/axios';\n\nconst ITEM_PER_PAGE = 30;\n\nconst STATUS = {\n    LOADING: 'loading',\n    LOAD_SUCCESS: 'success',\n    LOAD_ERROR: 'error',\n}\n\nconst TYPE = {\n    LOAD: 'LOAD',\n    LOAD_SUCCESS: 'LOAD_SUCCESS',\n    LOAD_ERROR: 'LOAD_ERROR',\n    LOAD_MORE_SUCCESS: 'LOAD_MORE_SUCCESS',\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case TYPE.LOAD:\n            return {\n                ...state,\n                status: STATUS.LOADING\n            };\n        case TYPE.LOAD_SUCCESS:\n            return {\n                ...state,\n                status: STATUS.LOAD_SUCCESS,\n                data: action.payload.data,\n                total: action.payload.total,\n            }\n        case TYPE.LOAD_ERROR:\n            return {\n                ...state,\n                status: STATUS.LOAD_ERROR,\n            }\n        case TYPE.LOAD_MORE_SUCCESS:\n            return {\n                ...state,\n                status: STATUS.LOAD_SUCCESS,\n                data: [...state.data, ...action.payload.data],\n                total: action.payload.total,\n            }\n        default:\n            return state;\n    }\n}\n\nconst useFetchDataHook = keyword => {\n\n    const [state, dispatch] = useReducer(reducer, {\n        status: STATUS.LOAD_SUCCESS,\n        data: [],\n        total: 0\n    });\n    const [sourceToken, setSourceToken] = useState(null);\n\n    function getData() {\n        return state.data;\n    }\n\n    function getTotal() {\n        return state.total;\n    }\n\n    function isLoading() {\n        return state.status === STATUS.LOADING;\n    }\n\n    function isLoadSuccess() {\n        return state.status === STATUS.LOAD_SUCCESS;\n    }\n\n    function isLoadError() {\n        return state.status === STATUS.LOAD_ERROR;\n    }\n\n    function clearSearch() {\n        dispatch({\n            type: TYPE.LOAD_SUCCESS,\n            payload: {\n                data: [],\n                total: 0\n            }\n        });\n    }\n\n    async function handleSearch(value) {\n        try {\n            if (value.trim() === '') {\n                return message.warning('Please enter some keyword to search');\n            }\n            if (sourceToken !== null) {\n                sourceToken.cancel();\n            }\n            dispatch({ type: TYPE.LOAD });\n            const CancelToken = axios.CancelToken;\n            const source = CancelToken.source();\n            setSourceToken(source);\n            const { data } = await axios.get(`/search/users?q=${value}`, {\n                cancelToken: source.token\n            });\n            dispatch({\n                type: TYPE.LOAD_SUCCESS,\n                payload: {\n                    data: data.items,\n                    total: data.total_count\n                }\n            });\n        } catch (error) {\n            console.log(error);\n            dispatch({ type: TYPE.LOAD_ERROR });\n        }\n    }\n\n    async function handleLoadMore() {\n        try {\n            if (keyword.trim() === '') {\n                return message.warning('Keyword not found');\n            }\n            const nextPage = Math.floor(state.data.length / ITEM_PER_PAGE) + 1;\n            dispatch({ type: TYPE.LOAD });\n            const { data } = await axios.get(`/search/users?q=${keyword}&page=${nextPage}`);\n            dispatch({\n                type: TYPE.LOAD_MORE_SUCCESS,\n                payload: {\n                    data: data.items,\n                    total: data.total_count\n                }\n            });\n        } catch (error) {\n            console.log(error);\n            dispatch({ type: TYPE.LOAD_ERROR });\n        }\n    }\n\n    return [\n        getData,\n        getTotal,\n        isLoading,\n        isLoadSuccess,\n        isLoadError,\n        clearSearch,\n        handleSearch,\n        handleLoadMore\n    ];\n}\n\nexport default useFetchDataHook;\n","import React, { useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Input, Avatar, Button, Spin, Result } from 'antd';\nimport { ClearOutlined } from '@ant-design/icons'\n\nimport useFetchDataHook from './useFetchDataHook'\n\nconst HomePage = () => {\n\n    const [keyword, setKeyword] = useState('');\n    const [\n        getData,\n        getTotal,\n        isLoading,\n        isLoadSuccess,\n        isLoadError,\n        clearSearch,\n        handleSearch,\n        handleLoadMore\n    ] = useFetchDataHook(keyword);\n\n    function handleInputChange(e) {\n        setKeyword(e.target.value)\n    }\n\n    function handleClearSearch() {\n        setKeyword('');\n        clearSearch();\n    }\n\n    function render() {\n        if (isLoadError()) {\n            return <Result status=\"500\" title=\"500\" subTitle=\"Sorry, something went wrong.\" />\n        }\n        if (isLoadSuccess()) {\n            if (getTotal() === 0) {\n                return <Result title=\"No user found\" />\n            } else {\n                return getData().map((user, index) => (\n                    <div key={user.id} className=\"flex items-center mb-6 pb-6 justify-between\" style={{ borderBottom: '1px solid #ccc' }}>\n                        <div className=\"flex items-center\">\n                            <p className=\"mr-8 mb-0\">#{index + 1}</p>\n                            <Avatar src={user.avatar_url} size={48} />\n                            <div className=\"ml-4\">\n                                <p className=\"font-bold text-base mb-0\">\n                                    {user.login}\n                                </p>\n                                <a href={user.html_url} target=\"__blank\" className=\"text-sm underline\">\n                                    Github Link\n                                </a>\n                            </div>\n                        </div>\n                        <Button type=\"primary\">\n                            <Link to={`/detail/${user.login}`}>\n                                Detail\n                            </Link>\n                        </Button>\n                    </div>\n                ));\n            }\n        }\n    }\n\n    return (\n        <div className=\"container mx-auto pt-8 w-100 h-100 flex flex-col items-center\">\n            <div className=\"px-4 py-8 shadow-lg rounded flex items-center\" style={{ backgroundColor: '#fff', width: 600 }}>\n                <Input.Search\n                    placeholder=\"Search by username\"\n                    enterButton\n                    value={keyword}\n                    onSearch={handleSearch}\n                    onChange={handleInputChange} />\n                <Button\n                    className=\"ml-2\"\n                    icon={<ClearOutlined />}\n                    onClick={handleClearSearch}\n                >\n                    Clear\n                </Button>\n            </div>\n            <Spin size=\"large\" tip=\"Loading\" spinning={isLoading()} delay=\"200\">\n                <div\n                    className=\"mt-4 px-4 py-8 shadow-lg rounded overflow-y-auto scroll\"\n                    style={{ backgroundColor: '#fff', width: 600, height: 'calc(100vh - 170px)' }}\n                >\n                    <p className=\"font-bold mb-6\">Result found: {getTotal()}</p>\n                    {render()}\n                    {\n                        getData().length < getTotal()\n                        && (\n                            <div className=\"w-100 mt-4 flex justify-center\">\n                                <Button type=\"primary\" onClick={handleLoadMore}>\n                                    Load More\n                                </Button>\n                            </div>\n                        )\n                    }\n                </div>\n            </Spin>\n        </div>\n    );\n}\n\nexport default HomePage\n","import React from 'react';\n\nconst DetailPage = () => {\n\n    return (\n        <p>Detail page</p>\n    );\n}\n\nexport default DetailPage\n","import React from 'react';\nimport { Switch, Route } from \"react-router-dom\";\nimport { GithubOutlined } from '@ant-design/icons';\n\nimport 'assets/styles/tailwind.css';\nimport 'assets/styles/app.css';\nimport HomePage from 'pages/HomePage';\nimport DetailPage from 'pages/DetailPage';\n\nconst App = () => {\n    return (\n        <div className=\"app w-100 h-screen overflow-hidden\" style={{ backgroundColor: '#f7f8fe' }}>\n            <div className=\"flex h-screen\">\n                <div className=\"w-64 shadow-2xl flex flex-col justify-center items-center\" style={{backgroundColor: '#24292e'}}>\n                    <span className=\"rounded-full inline-block\" style={{backgroundColor: '#fff'}}>\n                        <GithubOutlined style={{fontSize: 90}} />\n                    </span>\n                    <p className=\"text-xl font-bold text-white mt-4\">Github User Search</p>\n                </div>\n                <div className=\"flex flex-grow\">\n                    <Switch>\n                        <Route exact path=\"/github-search\" component={HomePage} />\n                        <Route exact path=\"/github-search/detail/:username\" component={DetailPage} />\n                    </Switch>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}